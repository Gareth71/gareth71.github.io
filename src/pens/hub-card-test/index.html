<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>button wrap test</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Lexend&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="variables.css" />
    <link rel="stylesheet" href="index.css" />
    <script defer src="index.js"></script>
  </head>
  <body>
    <div class="card-wrap">
      <ul class="card-list" role="list">
        <li class="card" data-card>
          <div class="img-wrap">
            <img
              src="monster-orange-foodie.svg"
              height="180"
              width="180"
              alt=""
            />
          </div>
          <div class="content">
            <div class="text">
              <h3 class="card__title">
                <a href="bbc.co.uk">Card title</a>
              </h3>

              <p class="card__sub-text">Sub title</p>
              <div class="children">
                <p>Additional text here</p>
              </div>
            </div>

            <div class="button-wrap">
              <div class="button-limit">
                <button>Button one</button>
                <button data-disappearing-button>Button two</button>
              </div>
              <div class="disclosure">
                <button
                  class="disclosure__button transparent"
                  aria-expanded="false"
                  data-disclosure-button
                >
                  <img src="icon-menu-stacked-24.svg" alt="" />
                </button>
                <ul class="disclosure__List">
                  <li>
                    <button class="hideMe" data-disappearing-button>
                      Button two
                    </button>
                  </li>
                  <li>
                    <button class="transparent">
                      <img src="icon-information-24.svg" alt="" />
                      <span>View product information</span>
                    </button>
                  </li>
                  <li>
                    <button class="transparent">
                      <img src="icon-download-24.svg" alt="" />
                      Download product
                    </button>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </li>
        <li class="card" data-card>
          <div class="img-wrap">
            <img
              src="monster-orange-foodie.svg"
              height="180"
              width="180"
              alt=""
            />
          </div>
          <div class="content">
            <div class="text">
              <h3 class="card__title">
                <a href="bbc.co.uk">Card title</a>
              </h3>

              <p class="card__sub-text">Sub title</p>
              <div class="children">
                <p>Additional text here</p>
              </div>
            </div>

            <div class="button-wrap">
              <div class="button-limit">
                <button>Button one</button>
                <button data-disappearing-button>Button two</button>
              </div>
              <div class="disclosure">
                <button
                  class="disclosure__button transparent"
                  aria-expanded="false"
                  data-disclosure-button
                >
                  <img src="icon-menu-stacked-24.svg" alt="" />
                </button>
                <ul class="disclosure__List">
                  <li>
                    <button class="hideMe" data-disappearing-button>
                      Button two
                    </button>
                  </li>
                  <li>
                    <button class="transparent">
                      <img src="icon-information-24.svg" alt="" />
                      <span>View product information</span>
                    </button>
                  </li>
                  <li>
                    <button class="transparent">
                      <img src="icon-download-24.svg" alt="" />
                      Download product
                    </button>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </li>
        <li class="card" data-card>
          <div class="img-wrap">
            <img
              src="monster-orange-foodie.svg"
              height="180"
              width="180"
              alt=""
            />
          </div>
          <div class="content">
            <div class="text">
              <h3 class="card__title">
                <a href="bbc.co.uk">Card title</a>
              </h3>

              <p class="card__sub-text">Sub title</p>
              <div class="children">
                <p>Additional text here</p>
              </div>
            </div>

            <div class="button-wrap">
              <div class="button-limit">
                <button>Button one</button>
                <button data-disappearing-button>Button two</button>
              </div>
              <div class="disclosure">
                <button
                  class="disclosure__button transparent"
                  aria-expanded="false"
                  data-disclosure-button
                >
                  <img src="icon-menu-stacked-24.svg" alt="" />
                </button>
                <ul class="disclosure__List">
                  <li>
                    <button class="hideMe" data-disappearing-button>
                      Button two
                    </button>
                  </li>
                  <li>
                    <button class="transparent">
                      <img src="icon-information-24.svg" alt="" />
                      <span>View product information</span>
                    </button>
                  </li>
                  <li>
                    <button class="transparent">
                      <img src="icon-download-24.svg" alt="" />
                      Download product
                    </button>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </li>
        <li class="card" data-card>
          <div class="img-wrap">
            <img
              src="monster-orange-foodie.svg"
              height="180"
              width="180"
              alt=""
            />
          </div>
          <div class="content">
            <div class="text">
              <h3 class="card__title">
                <a href="bbc.co.uk">Card title</a>
              </h3>

              <p class="card__sub-text">Sub title</p>
              <div class="children">
                <p>Additional text here</p>
              </div>
            </div>

            <div class="button-wrap">
              <div class="button-limit">
                <button>Button one</button>
                <button data-disappearing-button>Button two</button>
              </div>
              <div class="disclosure">
                <button
                  class="disclosure__button transparent"
                  aria-expanded="false"
                  data-disclosure-button
                >
                  <img src="icon-menu-stacked-24.svg" alt="" />
                </button>
                <ul class="disclosure__List">
                  <li>
                    <button class="hideMe" data-disappearing-button>
                      Button two
                    </button>
                  </li>
                  <li>
                    <button class="transparent">
                      <img src="icon-information-24.svg" alt="" />
                      <span>View product information</span>
                    </button>
                  </li>
                  <li>
                    <button class="transparent">
                      <img src="icon-download-24.svg" alt="" />
                      Download product
                    </button>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </li>
        <li class="card" data-card>
          <div class="img-wrap">
            <img
              src="monster-orange-foodie.svg"
              height="180"
              width="180"
              alt=""
            />
          </div>
          <div class="content">
            <div class="text">
              <h3 class="card__title">
                <a href="bbc.co.uk">Card title</a>
              </h3>

              <p class="card__sub-text">Sub title</p>
              <div class="children">
                <p>Additional text here</p>
              </div>
            </div>

            <div class="button-wrap">
              <div class="button-limit">
                <button>Button one</button>
                <button data-disappearing-button>Button two</button>
              </div>
              <div class="disclosure">
                <button
                  class="disclosure__button transparent"
                  aria-expanded="false"
                  data-disclosure-button
                >
                  <img src="icon-menu-stacked-24.svg" alt="" />
                </button>
                <ul class="disclosure__List">
                  <li>
                    <button class="hideMe" data-disappearing-button>
                      Button two
                    </button>
                  </li>
                  <li>
                    <button class="transparent">
                      <img src="icon-information-24.svg" alt="" />
                      <span>View product information</span>
                    </button>
                  </li>
                  <li>
                    <button class="transparent">
                      <img src="icon-download-24.svg" alt="" />
                      Download product
                    </button>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </li>
        <li class="card" data-card>
          <div class="img-wrap">
            <img
              src="monster-orange-foodie.svg"
              height="180"
              width="180"
              alt=""
            />
          </div>
          <div class="content">
            <div class="text">
              <h3 class="card__title">
                <a href="bbc.co.uk">Card title</a>
              </h3>

              <p class="card__sub-text">Sub title</p>
              <div class="children">
                <p>Additional text here</p>
              </div>
            </div>

            <div class="button-wrap">
              <div class="button-limit">
                <button>Button one</button>
                <button data-disappearing-button>Button two</button>
              </div>
              <div class="disclosure">
                <button
                  class="disclosure__button transparent"
                  aria-expanded="false"
                  data-disclosure-button
                >
                  <img src="icon-menu-stacked-24.svg" alt="" />
                </button>
                <ul class="disclosure__List">
                  <li>
                    <button class="hideMe" data-disappearing-button>
                      Button two
                    </button>
                  </li>
                  <li>
                    <button class="transparent">
                      <img src="icon-information-24.svg" alt="" />
                      <span>View product information</span>
                    </button>
                  </li>
                  <li>
                    <button class="transparent">
                      <img src="icon-download-24.svg" alt="" />
                      Download product
                    </button>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </div>

    <script>
      const allCards = [...document.querySelectorAll(".card")];

      allCards.forEach((card) => {
        console.log(card);
        const disapearingButton = card.querySelector(
          "[data-disappearing-button]"
        );
        const disapearingButtonInList = card.querySelector(
          "li > [data-disappearing-button]"
        );
        console.log(disapearingButton);

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              console.log(disapearingButtonInList);

              if (!entry.isIntersecting) {
                disapearingButtonInList.classList.remove("hideMe");
              } else {
                disapearingButtonInList.classList.add("hideMe");
              }
            });
          },
          {
            root: card.querySelector(".button-limit"),
            threshold: 0,
          }
        );

        observer.observe(disapearingButton);
      });
    </script>
  </body>
</html>
